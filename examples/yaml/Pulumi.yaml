name: provider-pve
runtime: yaml
plugins:
  providers:
    - name: pve
      path: ../../bin

resources:
  myFile:
    type: pve:storage:File
    properties:
      datastoreId: cephfs
      contentType: snippets
      sourceRaw:
        fileData: |
          hello world
        fileName: testfile011.yaml

  myVM:
    type: pve:vm:VM
    properties:
      name: "aTestVM"
      description: "test VM"
      cpu:
        type: EPYC-v3
        flagsEnabled:
          - virt-ssbd
        flagsDisabled:
          - spec-ctrl
        hidden: true
        hvVendorId: AuthenticAMD
        physBits: "48"
        cores: 4
        sockets: 2
        limit: 3.0
        units: 2048
        vcpus: 3
        numa: true
        numaNodes:
          - cpus: "0-1"
            hostNodes: "0"
            memory: 2048
            policy: "preferred"
          - cpus: "2-3"
            hostNodes: "1"
            policy: "interleave"
      memory: 27875
      efidisk:
        storage: "ceph-ha"
        efitype: "4m"
        preEnrolledKeys: false
      disks:
        - storage: "ceph-ha"
          size: 20
          interface: "scsi0"
        - storage: "ceph-ha"
          size: 17
          interface: "scsi1"
        - storage: "ceph-ha"
          size: 21
          interface: "sata0"
      clone:
        vmId: 102
        timeout: 360
        fullClone: true
